<div class="instructor-dashboard" *ngIf="!loading">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <h1>Welcome back, {{ currentUser.name || 'Instructor' }}!</h1>
      <p>Manage your courses and track your teaching progress</p>
    </div>

  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid" *ngIf="instructorStats">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon courses">
            <mat-icon>school</mat-icon>
          </div>
          <div class="stat-details">
            <h3>{{ instructorStats.totalCourses }}</h3>
            <p>Total Courses</p>
            <small>{{ getCoursesDisplay() }}</small>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon students">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-details">
            <h3>{{ formatNumber(instructorStats.totalStudents) }}</h3>
            <p>Total Students</p>
            <small>{{ instructorStats.totalEnrollments }} enrollments</small>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon rating">
            <mat-icon>star</mat-icon>
          </div>
          <div class="stat-details">
            <h3>{{ instructorStats.averageRating }}/5</h3>
            <p>Average Rating</p>
            <small>Across all courses</small>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon completion">
            <mat-icon>trending_up</mat-icon>
          </div>
          <div class="stat-details">
            <h3>{{ instructorStats.completionRate }}%</h3>
            <p>Completion Rate</p>
            <small>Student success rate</small>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Loading state for stats -->
  <div class="stats-loading" *ngIf="!instructorStats">
    <mat-card>
      <mat-card-content>
        <p>Loading statistics...</p>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Main Content Area -->
  <div class="dashboard-content">
    <!-- Left Column - Recent Courses -->
    <div class="left-column">
      <!-- Recent Courses Card -->
      <mat-card class="recent-courses-card">
        <mat-card-header>
          <mat-card-title>Recent Courses</mat-card-title>
          <mat-card-subtitle>Your latest course activities</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <!-- Show courses if they exist -->
          <div class="courses-list" *ngIf="recentCourses.length > 0; else noCourses">
            <div class="course-item" *ngFor="let course of recentCourses" (click)="navigateToCourse(course.id)">
              <div class="course-thumbnail">
                <img [src]="course.thumbnail" [alt]="course.title"
                  onerror="this.src='assets/images/defaultcourse.jpeg'">
              </div>
              <div class="course-info">
                <h4>{{ course.title }}</h4>
                <p>{{ course.enrollmentCount || 0 }} students enrolled</p>
                <div class="course-status">
                  <span class="status-badge" [class]="getStatusColor(course.status)">
                    {{ course.status | titlecase }}
                  </span>
                </div>
                <small class="course-date">Created: {{ course.createdAt | date:'shortDate' }}</small>
              </div>
              <div class="course-actions">
                <button mat-icon-button>
                  <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            </div>
          </div>

          <!-- Show this when no courses exist -->
          <ng-template #noCourses>
            <div class="empty-state">
              <mat-icon>school</mat-icon>
              <h4>No courses yet</h4>
              <p>Create your first course to get started</p>
              <button mat-button color="primary" routerLink="/instructor/create-course">
                Create Course
              </button>
            </div>
          </ng-template>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button routerLink="/instructor/my-courses">View All Courses</button>
        </mat-card-actions>
      </mat-card>

      <!-- Quick Statistics Card -->
      <!-- <mat-card class="quick-stats-card" *ngIf="instructorStats">
        <mat-card-header>
          <mat-card-title>Quick Overview</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="quick-stat">
            <span class="label">Active Courses:</span>
            <span class="value">{{ instructorStats.activeCourses }}</span>
          </div>
          <div class="quick-stat">
            <span class="label">Pending Approvals:</span>
            <span class="value pending">{{ instructorStats.pendingApprovals }}</span>
          </div>
          <div class="quick-stat">
            <span class="label">Total Enrollments:</span>
            <span class="value">{{ instructorStats.totalEnrollments }}</span>
          </div>
          <div class="quick-stat">
            <span class="label">Completion Rate:</span>
            <span class="value">{{ instructorStats.completionRate }}%</span>
          </div>
        </mat-card-content>
      </mat-card> -->
    </div>

    <!-- Right Column - Notifications and Actions -->
    <div class="right-column">
      <!-- Notifications Card -->
      <!-- <mat-card class="notifications-card">
        <mat-card-header>
          <mat-card-title>
            Recent Activity
            <span class="notification-badge" *ngIf="getUnreadNotificationCount() > 0"
              [matBadge]="getUnreadNotificationCount()" matBadgeColor="warn">
            </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content> -->
      <!-- Show notifications if they exist -->
      <!-- <div class="notifications-list" *ngIf="notifications.length > 0; else noNotifications">
            <div class="notification-item" *ngFor="let notification of notifications"
              [class.unread]="!notification.isRead" (click)="markNotificationAsRead(notification)">
              <div class="notification-icon">
                <mat-icon>{{ getNotificationIcon(notification.type) }}</mat-icon>
              </div>
              <div class="notification-content">
                <p>{{ notification.message }}</p>
                <span class="notification-time">{{ formatTimeAgo(notification.timestamp) }}</span>
              </div>
            </div>
          </div> -->

      <!-- Show this when no notifications exist -->
      <!-- <ng-template #noNotifications>
        <div class="empty-state">
          <mat-icon>notifications_none</mat-icon>
          <p>No recent notifications</p>
        </div>
      </ng-template>
      </mat-card-content>
      </mat-card> -->

      <!-- Quick Actions Card -->
      <!-- <mat-card class="quick-actions-card">
        <mat-card-header>
          <mat-card-title>Quick Actions</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="action-buttons">
            <button mat-stroked-button routerLink="/instructor/create-course" class="action-btn">
              <mat-icon>add_circle</mat-icon>
              <span>Create Course</span>
            </button>
            <button mat-stroked-button routerLink="/instructor/my-courses" class="action-btn">
              <mat-icon>library_books</mat-icon>
              <span>My Courses</span>
            </button>
            <button mat-stroked-button routerLink="/instructor/analytics" class="action-btn">
              <mat-icon>analytics</mat-icon>
              <span>View Analytics</span>
            </button>
            <button mat-stroked-button routerLink="/instructor/manage-resources" class="action-btn">
              <mat-icon>folder</mat-icon>
              <span>Manage Resources</span>
            </button>
          </div>
        </mat-card-content>
      </mat-card> -->
      <mat-card class="quick-stats-card" *ngIf="instructorStats">
        <mat-card-header>
          <mat-card-title>Quick Overview</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="quick-stat">
            <span class="label">Approved Courses:</span>
            <span class="value approved">{{ instructorStats.activeCourses }}</span>
          </div>
          <div class="quick-stat">
            <span class="label">Pending Approvals:</span>
            <span class="value pending">{{ instructorStats.pendingApprovals }}</span>
          </div>
          <div class="quick-stat">
            <span class="label">Rejected Courses:</span>
            <span class="value rejected">{{ instructorStats.rejectedCourses }}</span>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  <p>Loading dashboard...</p>
</div>